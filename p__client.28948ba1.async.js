(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[897],{52799:function(Fe,Y,n){"use strict";n.r(Y),n.d(Y,{default:function(){return he}});var Ze=n(66456),K=n(80818),Re=n(49111),T=n(19650),Ee=n(57663),z=n(71577),Se=n(71153),w=n(60331),E=n(11849),$e=n(34792),H=n(48086),O=n(3182),I=n(2824),De=n(71194),X=n(97022),k=n(94043),y=n.n(k),q=n(14854),P=n(36571),_=function(u){return(0,P.qC)("/client/save",u)},ee=function(u){return(0,P.Yu)("/client/list",u)},ne=function(u){return(0,P.Yu)("/region/lists",u)},te=function(u){return(0,P.qC)("/client/del",u)},Z=n(67294),L=n(21010),ae=n(46298),Q=n(75860),f=n(22811),e=n(85893),re=function(u){var j=(0,Z.useRef)(),S=u.isCreateClient?"\u65B0\u589E\u5BA2\u6237":"\u7F16\u8F91\u5BA2\u6237",$=function(){var m=(0,O.Z)(y().mark(function r(v){return y().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ne(v).then(function(R){var x;return R==null||(x=R.data)===null||x===void 0?void 0:x.list});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},r)}));return function(v){return m.apply(this,arguments)}}(),b=function(){var m=(0,O.Z)(y().mark(function r(v){var C,s;return y().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,_((0,E.Z)((0,E.Z)({},v),{},{id:(C=u==null||(s=u.record)===null||s===void 0?void 0:s.id)!==null&&C!==void 0?C:null})).then(function(g){(g==null?void 0:g.success)&&H.default.success(g.msg),(g==null?void 0:g.success)&&(0,Q.pQ)(2e3).then(function(){return u.reloadTable()})});case 2:case"end":return x.stop()}},r)}));return function(v){return m.apply(this,arguments)}}();return(0,e.jsxs)(f.Yr,{modalProps:{centered:!0,maskClosable:!1,destroyOnClose:!0,wrapClassName:"client-modal"},submitter:{searchConfig:{resetText:"\u91CD\u7F6E"},submitButtonProps:{shape:"round"},resetButtonProps:{shape:"round",type:"default",onClick:function(){var r;return(r=j.current)===null||r===void 0?void 0:r.resetFields()}}},width:500,formRef:j,title:S,autoFocusFirstInput:!0,open:u.modalOpen,initialValues:u.record,validateTrigger:["onBlur"],onOpenChange:u.handleSetModalOpen,onFinish:function(r){return b(r).then(function(){return!0})},children:[(0,e.jsx)(f.V,{hasFeedback:!0,label:"\u5BA2\u6237\u59D3\u540D",name:"username",tooltip:"\u5BA2\u6237\u7684\u59D3\u540D",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u59D3\u540D",fieldProps:{maxLength:20,showCount:!0},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u59D3\u540D"},{type:"string",pattern:/^[\u4e00-\u9fa5\w]+$/,message:"\u5BA2\u6237\u59D3\u540D\u4E0D\u5F97\u5305\u542B\u7279\u6B8A\u7B26\u53F7"}]}),(0,e.jsx)(f.V,{hasFeedback:!0,label:"\u5BA2\u6237\u624B\u673A",name:"mobile",tooltip:"\u5BA2\u6237\u7684\u624B\u673A\u53F7",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u624B\u673A\u53F7",fieldProps:{maxLength:11,showCount:!0},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u624B\u673A\u53F7"},{type:"string",pattern:/^1[3456789]\d{9}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801"}]}),(0,e.jsx)(f.V,{hasFeedback:!0,label:"\u5BA2\u6237\u90AE\u7BB1",name:"email",tooltip:"\u5BA2\u6237\u7684\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u90AE\u7BB1",fieldProps:{maxLength:30,showCount:!0},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u90AE\u7BB1"},{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740"}]}),(0,e.jsx)(f.V,{hasFeedback:!0,label:"\u516C\u53F8\u540D\u79F0",name:"company",tooltip:"\u5BA2\u6237\u7684\u516C\u53F8\u540D",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u516C\u53F8\u540D",fieldProps:{maxLength:50,showCount:!0},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u516C\u53F8\u540D"}]}),(0,e.jsxs)(f.UW,{size:2,label:"\u6240\u5728\u5730\u533A",children:[(0,e.jsx)(f._I,{name:"province",params:{pid:0},request:function(r){return $(r)},fieldProps:{fieldNames:{label:"name",value:"cid"},onChange:function(){var r;(r=j.current)===null||r===void 0||r.setFieldsValue({city:void 0,district:void 0})}},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u60A8\u6240\u5728\u7684\u7701\u4EFD"}]}),(0,e.jsx)(f.ie,{name:["province"],children:function(r){var v=r.province;return(0,e.jsx)(f._I,{name:"city",disabled:!v,params:{pid:v},request:function(s){return $(s)},fieldProps:{fieldNames:{label:"name",value:"cid"}},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u60A8\u6240\u5728\u7684\u57CE\u5E02"}]})}}),(0,e.jsx)(f.ie,{name:["city"],children:function(r){var v=r.city;return(0,e.jsx)(f._I,{name:"district",disabled:!v,params:{pid:v},request:function(s){return $(s)},fieldProps:{fieldNames:{label:"name",value:"cid"}},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u60A8\u6240\u5728\u7684\u533A\u57DF"}]})}})]}),(0,e.jsx)(f.$J,{hasFeedback:!0,label:"\u5BA2\u6237\u9700\u6C42",name:"message",tooltip:"\u5BA2\u6237\u7684\u7B80\u8981\u9700\u6C42",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u7B80\u8981\u9700\u6C42",fieldProps:{maxLength:100,showCount:!0,allowClear:!0,autoSize:{minRows:5,maxRows:8}},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7684\u7B80\u8981\u9700\u6C42"}]})]})},ue=n(13731),le=function(u){var j=[{title:"IP\u5730\u5740",render:function(){return(0,Q.hm)(u.record.ipaddress)}},{title:"\u6765\u6E90\u7F51\u5740",copyable:!0,dataIndex:"page"},{title:"\u516C\u53F8\u540D\u79F0",copyable:!0,dataIndex:"company"},{span:3,title:"\u9700\u6C42\u63CF\u8FF0",copyable:!0,dataIndex:"message"}];return(0,e.jsx)(ue.vY,{title:"\u5BA2\u6237\u8BE6\u60C5",layout:"vertical",columns:j,dataSource:u.record,labelStyle:{fontWeight:"bold"},column:{xs:1,sm:2,md:3,lg:4}})},se=n(1870),ie=n(64302),oe=n(36928),de=n(46842),ce=n(8212),ve=n(73171),fe=n(49101),he=function(){var B=X.Z.confirm,u=(0,L.md)(),j=(0,L.tT)("resize",function(l){return{resize:l.resize}}),S=j.resize,$=(0,Z.useState)(!1),b=(0,I.Z)($,2),m=b[0],r=b[1],v=(0,Z.useState)([]),C=(0,I.Z)(v,2),s=C[0],R=C[1],x=(0,Z.useState)({}),g=(0,I.Z)(x,2),me=g[0],W=g[1],pe=(0,Z.useState)(!1),G=(0,I.Z)(pe,2),xe=G[0],J=G[1],D=(0,Z.useRef)(),ge=function(a,t){R(function(){return a?[t.id]:[]})},Ce=function(a,t){a.stopPropagation(),W(t),r(!0),J(!1)},ye=function(){W({}),r(!0),J(!0)},U=function(a,t){a.stopPropagation();var o=[],h=[];t instanceof Array&&t.forEach(function(d){var i;o.push(d.id),h.push((i=d==null?void 0:d.username)!==null&&i!==void 0?i:"")}),B({centered:!0,cancelText:"\u7B97\u4E86",title:"\u5F53\u771F\u8981\u5220\u9664?",icon:(0,e.jsx)(se.Z,{}),cancelButtonProps:{shape:"round"},okButtonProps:{danger:!0,shape:"round"},content:t instanceof Array?"".concat(h.slice(0,3).join("\uFF0C")," \u7B49 ").concat(h.length," \u4E2A\u5BA2\u6237"):"".concat(t.username," \u8FD9\u4E2A\u5BA2\u6237"),onOk:function(){return(0,O.Z)(y().mark(function i(){return y().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,te({id:t.id||o}).then(function(c){var A,F;(A=D.current)===null||A===void 0||A.reload(),(c==null?void 0:c.success)&&H.default.success(c.msg),t instanceof Array&&((F=D.current)===null||F===void 0||F.clearSelected())});case 2:case"end":return p.stop()}},i)}))()},onCancel:function(){var i;t instanceof Array&&((i=D.current)===null||i===void 0||i.clearSelected())}})},Be=function(){var l=(0,O.Z)(y().mark(function a(t,o,h){var d,i;return y().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:d=(0,E.Z)((0,E.Z)((0,E.Z)({},t),o),h);for(i in d)(d[i]===""||d[i]===null||d[i]===void 0)&&delete d[i];return p.next=4,ee(d).then(function(c){var A,F,M,N,V;return{data:(A=c==null||(F=c.data)===null||F===void 0?void 0:F.list)!==null&&A!==void 0?A:[],total:(M=c==null||(N=c.data)===null||N===void 0?void 0:N.total)!==null&&M!==void 0?M:0,success:(V=c==null?void 0:c.success)!==null&&V!==void 0?V:!0}});case 4:return p.abrupt("return",p.sent);case 5:case"end":return p.stop()}},a)}));return function(t,o,h){return l.apply(this,arguments)}}(),je=[{search:!1,dataIndex:"id"},{title:"\u59D3\u540D",dataIndex:"username"},{title:"\u7535\u8BDD",copyable:!0,dataIndex:"mobile"},{title:"\u90AE\u7BB1",search:!1,copyable:!0,dataIndex:"email"},{title:"\u5730\u533A",search:!1,dataIndex:"address",render:function(a,t){var o;return(o=t==null?void 0:t.address)!==null&&o!==void 0?o:"\u672A\u77E5"}},{title:"\u6765\u6E90",search:!1,filters:!0,onFilter:!0,filterMode:"tree",valueType:"select",dataIndex:"source",valueEnum:{0:{text:"\u624B\u52A8\u5F55\u5165",status:"Manual"},1:{text:"\u8868\u5355\u7559\u8A00",status:"Form"},2:{text:"\u767E\u5EA6\u5546\u6865",status:"shangqiao"}},render:function(a,t){switch(t.source){case 1:return(0,e.jsx)(w.Z,{color:"magenta",icon:(0,e.jsx)(ie.Z,{}),children:"\u8868\u5355\u7559\u8A00"},t.id);case 2:return(0,e.jsx)(w.Z,{color:"blue",icon:(0,e.jsx)(oe.Z,{}),children:"\u767E\u5EA6\u5546\u6865"},t.id);default:return(0,e.jsx)(w.Z,{color:"green",icon:(0,e.jsx)(de.Z,{}),children:"\u624B\u52A8\u5F55\u5165"},t.id)}}},{sorter:!0,search:!1,title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_time"},{title:"\u65E5\u671F\u8303\u56F4",hideInTable:!0,dataIndex:"dateRange",valueType:"dateRange",fieldProps:{showNow:!0,showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}},{title:"\u64CD\u4F5C",search:!1,render:function(a,t){return[(0,e.jsxs)(T.Z,{size:4,children:[(0,e.jsx)(z.Z,{size:"small",shape:"round",icon:(0,e.jsx)(ce.Z,{}),onClick:function(h){return Ce(h,t)},children:"\u7F16\u8F91"}),(0,e.jsx)(z.Z,{danger:!0,size:"small",type:"primary",shape:"round",icon:(0,e.jsx)(ve.Z,{}),onClick:function(h){return U(h,t)},children:"\u5220\u9664"})]},"operation")]}}];return(0,e.jsxs)(ae.ZP,{children:[(0,e.jsx)(q.ZP,{actionRef:D,columns:je,request:Be,search:{filterType:"light"},scroll:S.tableScroll,rowKey:function(a){return a.id},rowSelection:{selections:[K.Z.SELECTION_ALL,K.Z.SELECTION_INVERT]},pagination:{pageSize:S.pageSize,hideOnSinglePage:!0},headerTitle:(0,e.jsx)(L.Nv,{accessible:u.btnFilter("client_create_btn"),children:(0,e.jsx)(z.Z,{shape:"round",type:"primary",icon:(0,e.jsx)(fe.Z,{}),onClick:ye,children:"\u65B0\u589E\u5BA2\u6237"},"clientCreate")}),expandable:{expandRowByClick:!0,rowExpandable:function(){return!0},expandedRowKeys:s,expandedRowRender:function(a){return(0,e.jsx)(le,{record:a})},onExpand:function(a,t){return ge(a,t)}},tableAlertRender:function(a){var t=a.selectedRowKeys,o=a.onCleanSelected;return(0,e.jsx)(T.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",t.length," \u9879",(0,e.jsx)("a",{style:{marginLeft:8},onClick:o,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(a){var t=a.selectedRows;return(0,e.jsx)(T.Z,{size:16,children:(0,e.jsx)("a",{onClick:function(h){return U(h,t)},children:"\u6279\u91CF\u5220\u9664"})})}}),(0,e.jsx)(re,{record:me,modalOpen:m,isCreateClient:xe,reloadTable:function(){var a;return(a=D.current)===null||a===void 0?void 0:a.reload()},handleSetModalOpen:function(a){return r(a)}})]})}}}]);
