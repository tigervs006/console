(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7909],{97639:function(b){b.exports={siteTagPlus:"siteTagPlus___1olkg",tagElement:"tagElement___Cmkrh"}},84994:function(b,C,e){"use strict";e.d(C,{Q:function(){return V}});var P=e(47673),B=e(4107),$=e(71153),D=e(60331),g=e(86582),_=e(2824),i=e(67294),Z=e(97639),m=e.n(Z),x=e(65858),S=e(89366),L=e(49101),c=e(85893),V=function(u){var T,M,w=(T=u==null?void 0:u.color)!==null&&T!==void 0?T:"processing",F=(0,i.useRef)(null),Q=(0,i.useState)(""),l=(0,_.Z)(Q,2),s=l[0],O=l[1],f=(0,i.useState)(function(){var n;return(n=u==null?void 0:u.tagsList)!==null&&n!==void 0?n:[]}),U=(0,_.Z)(f,2),h=U[0],j=U[1],z=(M=u==null?void 0:u.tagIcon)!==null&&M!==void 0?M:(0,c.jsx)(S.Z,{"data-inspector-line":"34","data-inspector-column":"51","data-inspector-relative-path":"src\\pages\\components\\InputTagList\\index.tsx"}),G=(0,i.useState)(!1),R=(0,_.Z)(G,2),I=R[0],A=R[1];(0,i.useEffect)(function(){var n;I&&((n=F.current)===null||n===void 0||n.focus())},[I]);var y=function(){return A(!0)},W=function(t){return O(t.target.value)},N=function(t){var a=h.filter(function(o){return o!==t});u.handleChange(a),j(a)},K=function(){if(s&&h.indexOf(s)===-1){var t=[].concat((0,g.Z)(h),[s]);u.handleChange(t),j(t)}O(""),A(!1)},Y=function(t){var a=(0,c.jsx)(D.Z,{"data-inspector-line":"66","data-inspector-column":"12","data-inspector-relative-path":"src\\pages\\components\\InputTagList\\index.tsx",closable:!0,color:w,icon:z,onClose:function(r){r.preventDefault(),N(t)},children:t});return(0,c.jsx)("span",{"data-inspector-line":"79","data-inspector-column":"12","data-inspector-relative-path":"src\\pages\\components\\InputTagList\\index.tsx",className:m().tagElement,children:a},t)},H=h.map(Y);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{"data-inspector-line":"88","data-inspector-column":"12","data-inspector-relative-path":"src\\pages\\components\\InputTagList\\index.tsx",children:(0,c.jsx)(x.Z,{"data-inspector-line":"89","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\components\\InputTagList\\index.tsx",enter:{scale:.8,opacity:0,type:"from",duration:100},onEnd:function(t){(t.type==="appear"||t.type==="enter")&&(t.target.style="display: inline-block")},leave:{width:0,scale:0,opacity:0,duration:200},appear:!1,children:H})}),I&&(0,c.jsx)(B.Z,{"data-inspector-line":"113","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\components\\InputTagList\\index.tsx",ref:F,type:"text",size:"small",style:{width:"30%"},value:s,onBlur:K,onChange:W,onPressEnter:K}),!I&&(0,c.jsxs)(D.Z,{"data-inspector-line":"127","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\components\\InputTagList\\index.tsx",onClick:y,className:m().siteTagPlus,children:[(0,c.jsx)(L.Z,{"data-inspector-line":"128","data-inspector-column":"20","data-inspector-relative-path":"src\\pages\\components\\InputTagList\\index.tsx"})," ",u.addition]})]})}},43420:function(b,C,e){"use strict";e.r(C);var P=e(49111),B=e(19650),$=e(34792),D=e(48086),g=e(11849),_=e(3182),i=e(2824),Z=e(94043),m=e.n(Z),x=e(21010),S=e(75860),L=e(67294),c=e(99882),V=e(10975),ne=e(46298),u=e(78980),T=e(84994),M=e(9006),w=e(258),F=e(54977),Q=e(15873),l=e(22811),s=e(85893);C.default=function(){var O,f=(0,L.useRef)(),U=(0,L.useState)([]),h=(0,i.Z)(U,2),j=h[0],z=h[1],G=(0,x.tT)("file",function(n){return{setUploadList:n.setUploadList}}),R=G.setUploadList,I=(0,L.useState)(function(){var n;return((n=f.current)===null||n===void 0?void 0:n.getFieldValue("content"))||null}),A=(0,i.Z)(I,2),y=A[0],W=A[1],N=function(){var n=(0,_.Z)(m().mark(function t(){return m().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,c.V5)({nid:2}).then(function(r){var E;return r==null||(E=r.data)===null||E===void 0?void 0:E.list.map(function(p){return{value:p.id,label:p.cname}})});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)}));return function(){return n.apply(this,arguments)}}(),K=function(t){var a;W(t),(a=f.current)===null||a===void 0||a.setFieldsValue({content:t})},Y=function(){var n=(0,_.Z)(m().mark(function t(a){var o,r;return m().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,M.gg)((0,g.Z)((0,g.Z)({},a),{},{content:y,id:(o=(r=x.m8.location.query)===null||r===void 0?void 0:r.id)!==null&&o!==void 0?o:"0"})).then(function(v){(v==null?void 0:v.success)&&D.default.success(v.msg),(v==null?void 0:v.success)&&(0,S.pQ)(2e3).then(function(){return x.m8.push({pathname:"/product/list"})})});case 2:case"end":return p.stop()}},t)}));return function(a){return n.apply(this,arguments)}}(),H=function(){var n=(0,_.Z)(m().mark(function t(a){return m().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(a!=null&&a.id)){r.next=6;break}return r.next=3,(0,M.C5)(a).then(function(E){var p,v,J,X,k,q,ee,d=(p=E==null||(v=E.data)===null||v===void 0?void 0:v.info)!==null&&p!==void 0?p:{};return z(d==null?void 0:d.special),W((J=d==null||(X=d.detail)===null||X===void 0?void 0:X.content)!==null&&J!==void 0?J:null),R((k=d==null?void 0:d.album.map(function(ae){var te;return{url:ae,status:"done",uid:Math.floor(Math.random()*100).toString(),name:((te=ae.match(/\/(\w+\.(?:png|jpg|gif|bmp))$/i))===null||te===void 0?void 0:te[1])||""}}))!==null&&k!==void 0?k:[]),(0,g.Z)((0,g.Z)({},d),{},{content:(q=d==null||(ee=d.detail)===null||ee===void 0?void 0:ee.content)!==null&&q!==void 0?q:null})});case 3:return r.abrupt("return",r.sent);case 6:return R([]),r.abrupt("return",{});case 8:case"end":return r.stop()}},t)}));return function(a){return n.apply(this,arguments)}}();return(0,s.jsx)(ne.ZP,{"data-inspector-line":"94","data-inspector-column":"8","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",children:(0,s.jsxs)(l.ZP,{"data-inspector-line":"95","data-inspector-column":"12","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",formRef:f,layout:"vertical",wrapperCol:{md:{span:16},lg:{span:16},xl:{span:8}},initialValues:{isCrop:1},submitter:{render:function(t,a){return(0,s.jsx)(B.Z,{"data-inspector-line":"109","data-inspector-column":"28","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",size:"middle",children:a},"spaceGroup")},resetButtonProps:{shape:"round",icon:(0,s.jsx)(w.Z,{"data-inspector-line":"114","data-inspector-column":"62","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx"})},submitButtonProps:{type:"primary",shape:"round",icon:(0,s.jsx)(F.Z,{"data-inspector-line":"115","data-inspector-column":"80","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx"})}},validateTrigger:["onBlur"],params:{id:(O=x.m8.location.query)===null||O===void 0?void 0:O.id},onFinish:function(t){return Y(t)},request:function(t){return H(t)},children:[(0,s.jsx)(l._I,{"data-inspector-line":"126","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",hasFeedback:!0,width:"sm",name:"pid",label:"\u5206\u7C7B",request:N,tooltip:"\u5546\u54C1\u53D1\u5E03\u7684\u5206\u7C7B",fieldProps:{allowClear:!1},rules:[{required:!0,message:"\u9009\u62E9\u5546\u54C1\u53D1\u5E03\u7684\u5206\u7C7B"}]}),(0,s.jsx)(l.Hg,{"data-inspector-line":"136","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",min:0,width:"sm",hasFeedback:!0,label:"\u552E\u4EF7",name:"price",rules:[{required:!0,message:"\u8BF7\u4E3A\u5546\u54C1\u8BBE\u7F6E\u552E\u4EF7"}]}),(0,s.jsx)(l.V,{"data-inspector-line":"137","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",hasFeedback:!0,width:"sm",label:"\u5E93\u5B58",name:"stock",tooltip:"\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u8BBE\u7F6E\u5E93\u5B58",fieldProps:{allowClear:!1},rules:[{required:!0,message:"\u8BF7\u4E3A\u5546\u54C1\u8BBE\u7F6E\u5E93\u5B58"},{pattern:/^\d+$/,message:"\u5546\u54C1\u5E93\u5B58\u5FC5\u9700\u4E3A\u6B63\u6574\u6570"}]}),(0,s.jsx)(l.V,{"data-inspector-line":"149","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",hasFeedback:!0,label:"\u5546\u54C1\u540D",name:"title",tooltip:"\u9650\u523632\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u4F5C\u4E3A\u6807\u9898",getValueFromEvent:function(t){return t.target.value.trim()},fieldProps:{maxLength:32,showCount:!0},rules:[{required:!0,message:"\u8BF7\u5B8C\u5584\u5546\u54C1\u540D"},{min:15,message:"\u5546\u54C1\u540D\u4E0D\u5B9C\u592A\u77ED"}]}),(0,s.jsx)(l.V,{"data-inspector-line":"163","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",hasFeedback:!0,label:"\u5173\u952E\u8BCD",name:"keywords",tooltip:"\u8BF7\u7528\u7A7A\u683C\u5206\u9694",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",fieldProps:{showCount:!0,maxLength:32},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"},{type:"string",min:8,message:"\u518D\u591A\u6765\u4E24\u4E2A\u5173\u952E\u8BCD"},{type:"string",pattern:/^[^\u2018-\u2027\uff01-\uff0f\uff1a-\uff20\u3002]+$/,message:"\u5173\u952E\u8BCD\u53EA\u80FD\u4F7F\u7528\u82F1\u6587\u9017\u53F7\u6216\u7A7A\u683C\u5206\u9694"}]}),(0,s.jsx)(l.$J,{"data-inspector-line":"180","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",hasFeedback:!0,label:"\u5546\u54C1\u7B80\u8FF0",name:"description",tooltip:"SEO\u4F18\u5316\u5F88\u91CD\u8981",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u7B80\u8FF0",getValueFromEvent:function(t){return t.target.value.trim()},fieldProps:{maxLength:256,showCount:!0,allowClear:!0,autoSize:{minRows:5,maxRows:8}},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u7B80\u8FF0"},{type:"string",min:50,message:"\u518D\u591A\u51E0\u53E5\u5546\u54C1\u7B80\u8FF0\u5427"}]}),(0,s.jsx)(l.ZP.Item,{"data-inspector-line":"199","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",hasFeedback:!0,label:"\u5546\u54C1\u5356\u70B9",name:"special",tooltip:"\u63D0\u70BC\u5546\u54C1\u5356\u70B9",rules:[{required:!0,message:"\u8BF7\u81F3\u5C11\u586B\u5199\u4E00\u4E2A\u5546\u54C1\u5356\u70B9"},function(){return{validator:function(t,a){return 3>=a.length?Promise.resolve():Promise.reject(new Error("\u5546\u54C1\u5356\u70B9\u53EA\u9700\u89813\u4E2A\u5C31\u884C\u4E86"))}}}],children:(0,s.jsx)(T.Q,{"data-inspector-line":"213","data-inspector-column":"20","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",color:"red",tagsList:j,addition:"\u5546\u54C1\u5356\u70B9",tagIcon:(0,s.jsx)(Q.Z,{"data-inspector-line":"217","data-inspector-column":"33","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx"}),handleChange:function(t){var a;return(a=f.current)===null||a===void 0?void 0:a.setFieldValue("special",t)}})}),(0,s.jsx)(l.ZP.Item,{"data-inspector-line":"221","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",name:"album",label:"\u5546\u54C1\u76F8\u518C",tooltip:"\u9650\u5236\u4E3A5\u5F20\u56FE\u7247",rules:[{required:!0,message:"\u8BF7\u5B8C\u5584\u5546\u54C1\u76F8\u518C"},{type:"array",max:5,message:"\u5546\u54C1\u76F8\u518C\u53EA\u9700\u89815\u5F20\u56FE\u7247\u5C31\u884C\u4E86"}],children:(0,s.jsx)(u.p,{"data-inspector-line":"230","data-inspector-column":"20","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",limit:5,setFieldValue:function(t){var a;return(a=f.current)===null||a===void 0?void 0:a.setFieldValue("album",t)}})}),(0,s.jsx)(l.ZP.Item,{"data-inspector-line":"232","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",name:"content",label:"\u5546\u54C1\u8BE6\u60C5",tooltip:"\u5546\u54C1\u8BE6\u60C5",wrapperCol:{xs:{span:24},sm:{span:24},xl:{span:16}},rules:[{required:!0,message:"\u5546\u54C1\u8BE6\u60C5\u4E0D\u5F97\u4E3A\u7A7A"}],children:(0,s.jsx)(V.Z,{"data-inspector-line":"243","data-inspector-column":"20","data-inspector-relative-path":"src\\pages\\product\\edit\\index.tsx",content:y,setContent:K,uploadPath:"product/content"})})]})})}},9006:function(b,C,e){"use strict";e.d(C,{C5:function(){return B},gg:function(){return $},Od:function(){return D},rQ:function(){return g}});var P=e(36571),B=function(i){return(0,P.Yu)("/product",i)},$=function(i){return(0,P.qC)("/product/save",i)},D=function(i){return(0,P.qC)("/product/del",i)},g=function(i){return(0,P.Yu)("/product/list",i)}}}]);
