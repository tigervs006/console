(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[909],{97639:function(k){k.exports={siteTagPlus:"siteTagPlus___1olkg",tagElement:"tagElement___Cmkrh"}},99882:function(k,T,e){"use strict";e.d(T,{wk:function(){return y},rQ:function(){return $},V5:function(){return A},Od:function(){return M},mJ:function(){return I},m4:function(){return d},R$:function(){return V}});var h=e(36571),y=function(o){return(0,h.qC)("/channel/save",o)},$=function(o){return(0,h.Yu)("/channel/list",o)},A=function(o){return(0,h.Yu)("/channel/cate",o)},M=function(o){return(0,h.qC)("/channel/del",o)},I=function(o){return(0,h.qC)("/module/save",o)},d=function(o){return(0,h.Yu)("/module/list",o)},V=function(o){return(0,h.qC)("/module/del",o)}},10975:function(k,T,e){"use strict";e.d(T,{Z:function(){return s}});var h=e(49111),y=e(19650),$=e(3182),A=e(34792),M=e(48086),I=e(402),d=e(95574),V=e(69610),v=e(54941),o=e(81306),q=e(19809),N=e(94043),m=e.n(N),ee=e(67294),re=e(21010),_=e(72757),H=e.n(_),F=e(5234),te=e.n(F),l=e(8212),ne=e(7085),i=e(85893),s=function(U){(0,o.Z)(R,U);var j=(0,q.Z)(R);function R(f){var C,B;return(0,V.Z)(this,R),B=j.call(this,f),B.state={saving:!1,defaultType:"secondary",defaultStatus:"waiting for input...",uploadPath:(C=f==null?void 0:f.uploadPath)!==null&&C!==void 0?C:"article/content",content:(f==null?void 0:f.content)||"<p>\u6765\u5427\uFF0C\u8BF7\u5F00\u59CB\u4F60\u7684\u8868\u6F14...</p>"},B}return(0,v.Z)(R,[{key:"render",value:function(){var C=this,B=d.Z.Text,ae=function(g){console.log("\u81EA\u52A8\u4FDD\u5B58\uFF1A",g),M.default.success("\u81EA\u52A8\u4FDD\u5B58\u6210\u529F")},z={autosave:{waitingTime:6e4,save:function(g){return ae(g.getData())}}},x=function(g){var K=g.plugins.get("WordCount"),S=document.getElementById("word-count");S==null||S.appendChild(K.wordCountContainer);var J=g.plugins.get("PendingActions");J.on("change:hasAny",function(Y,w,a){a?C.setState({saving:!0,defaultType:"danger",defaultStatus:"inputing..."}):C.setState({saving:!1,defaultType:"success",defaultStatus:"Auto save succeeded!"})}),g.plugins.get("FileRepository").createUploadAdapter=function(Y){var w=C.state;return{upload:function(){return(0,$.Z)(m().mark(function t(){var n,c;return m().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Y.file;case 2:return n=P.sent,c=new FormData,c.append("file",n),c.append("path",w.uploadPath),P.abrupt("return",new Promise(function(){var O=(0,$.Z)(m().mark(function D(Q,se){return m().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,re.WY)("/attach/upload",{method:"post",data:c}).then(function(p){if(p!=null&&p.success){var E;M.default.success(p==null?void 0:p.msg),Q({default:p==null||(E=p.data)===null||E===void 0?void 0:E.url})}else se()});case 2:case"end":return Z.stop()}},D)}));return function(D,Q){return O.apply(this,arguments)}}()));case 7:case"end":return P.stop()}},t)}))()}}}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.CKEditor,{config:z,editor:te(),data:this.state.content,onReady:function(g){return x(g)},onChange:function(g,K){C.setState({content:K.getData()},function(){return C.props.setContent(K.getData())})}}),(0,i.jsxs)("div",{className:"edit-footer-info",children:[(0,i.jsx)("div",{id:"word-count"}),(0,i.jsxs)(y.Z,{children:[(0,i.jsxs)(B,{strong:!0,children:[(0,i.jsx)(l.Z,{})," Editor status:"]}),(0,i.jsxs)(B,{type:this.state.defaultType,children:[this.state.saving&&(0,i.jsx)(ne.Z,{})," ",this.state.defaultStatus]})]})]})]})}}]),R}(ee.Component)},78980:function(k,T,e){"use strict";e.d(T,{p:function(){return ne}});var h=e(57663),y=e(71577),$=e(49111),A=e(19650),M=e(2824),I=e(402),d=e(95574),V=e(96486),v=e.n(V),o=e(21010),q=e(40245),N=e(61193),m=e.n(N),ee=e(21940),re=e(22811),_=e(67294),H=e(95357),F=e(54549),te=e(85008),l=e(85893),ne=function(s){var U,j=d.Z.Text,R=(U=s==null?void 0:s.limit)!==null&&U!==void 0?U:1,f=(0,_.useRef)(),C=(0,_.useState)(0),B=(0,M.Z)(C,2),ae=B[0],z=B[1],x=(0,_.useRef)(null),W=(0,_.useState)(!1),g=(0,M.Z)(W,2),K=g[0],S=g[1],J=(0,_.useState)({left:0,top:0,bottom:0,right:0}),Y=(0,M.Z)(J,2),w=Y[0],a=Y[1],t=(0,o.tT)("file",function(u){return{uploadList:u.uploadList,setUploadList:u.setUploadList}}),n=t.uploadList,c=t.setUploadList,r=(0,o.tT)("attach",function(u){return{open:u.open,span:u.span,setOpen:u.setOpen,isModal:u.isModal,setLimit:u.setLimit,setCateId:u.setCateId,setIsModal:u.setIsModal,setMultiple:u.setMultiple,setPagination:u.setPagination,setExpandedKeys:u.setExpandedKeys}}),P=r.open,O=r.setOpen,D=r.setLimit,Q=r.setCateId,se=r.setIsModal,ue=r.setMultiple,Z=r.span,p=r.setPagination,E=r.setExpandedKeys;(0,_.useEffect)(function(){D(R),ue(1<R)},[R,D,ue]),(0,_.useEffect)(function(){s.setFieldValue(n==null?void 0:n.map(function(u){return u.url}))},[n]);var oe=function(b,L){var X,G=(X=x.current)===null||X===void 0?void 0:X.getBoundingClientRect(),_e=window.document.documentElement,ce=_e.clientWidth,ve=_e.clientHeight;!G||a({top:-G.top+L.y,left:-G.left+L.x,right:ce-(G.right-L.x),bottom:ve-(G.bottom-L.y)})},le=function(b){c(function(L){var X=v().cloneDeep(L);return X.splice(b,1).filter(function(G){return G}),X})},ie=function(b){var L;z(b),(L=f.current)===null||L===void 0||L.imagePreview(!0)},de=function(){Q([0]),O(!0),E([]),p({current:1,pageSize:24})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(A.Z,{size:"large",className:"ant-image-container",children:[n?n==null?void 0:n.map(function(u,b){return(0,l.jsxs)("div",{className:"ant-image",children:[(0,l.jsx)("img",{src:u.url,alt:u.name,className:"ant-image-img"}),(0,l.jsx)("div",{className:"ant-image-mask",children:(0,l.jsx)(A.Z,{className:"ant-image-mask-info",children:(0,l.jsx)(j,{className:"anticon",onClick:function(){return ie(b)},children:(0,l.jsxs)("p",{children:[(0,l.jsx)(H.Z,{}),"\u9884\u89C8"]})})})}),(0,l.jsx)(y.Z,{shape:"circle",icon:(0,l.jsx)(F.Z,{style:{fontSize:".8rem"}}),onClick:function(){return le(b)}})]},u.uid)}):null,R>n.length&&(0,l.jsx)("div",{className:"ant-image-select",children:(0,l.jsx)(te.Z,{id:"select",onClick:function(){return de()}})})]}),(0,l.jsx)(ee.e,{ref:f,curIdx:ae,imgList:n}),(0,l.jsx)(re.Yr,{width:960,open:P,submitter:!1,onOpenChange:function(b){return se(b)},modalProps:{centered:!0,maskClosable:!1,destroyOnClose:!0,afterClose:function(){Q([0]),E([]),p({current:1,pageSize:Z.pageSize})},onCancel:function(){return O(!1)},modalRender:function(b){return(0,l.jsx)(m(),{bounds:w,disabled:K,onStart:function(X,G){return oe(X,G)},children:(0,l.jsx)("div",{ref:x,children:b})})}},title:(0,l.jsx)("div",{style:{width:"100%",cursor:"move"},onMouseOut:function(){S(!0)},onMouseOver:function(){K&&S(!1)},children:"\u6587\u4EF6\u7BA1\u7406"}),children:(0,l.jsx)(q.b,{previewSpan:18,directorySpan:6})})]})}},84994:function(k,T,e){"use strict";e.d(T,{Q:function(){return ee}});var h=e(47673),y=e(4107),$=e(71153),A=e(60331),M=e(86582),I=e(2824),d=e(67294),V=e(97639),v=e.n(V),o=e(65858),q=e(89366),N=e(49101),m=e(85893),ee=function(_){var H,F,te=(H=_==null?void 0:_.color)!==null&&H!==void 0?H:"processing",l=(0,d.useRef)(null),ne=(0,d.useState)(""),i=(0,I.Z)(ne,2),s=i[0],U=i[1],j=(0,d.useState)(function(){var a;return(a=_==null?void 0:_.tagsList)!==null&&a!==void 0?a:[]}),R=(0,I.Z)(j,2),f=R[0],C=R[1],B=(F=_==null?void 0:_.tagIcon)!==null&&F!==void 0?F:(0,m.jsx)(q.Z,{}),ae=(0,d.useState)(!1),z=(0,I.Z)(ae,2),x=z[0],W=z[1];(0,d.useEffect)(function(){var a;x&&((a=l.current)===null||a===void 0||a.focus())},[x]);var g=function(){return W(!0)},K=function(t){return U(t.target.value)},S=function(t){var n=f.filter(function(c){return c!==t});_.handleChange(n),C(n)},J=function(){if(s&&f.indexOf(s)===-1){var t=[].concat((0,M.Z)(f),[s]);_.handleChange(t),C(t)}U(""),W(!1)},Y=function(t){var n=(0,m.jsx)(A.Z,{closable:!0,color:te,icon:B,onClose:function(r){r.preventDefault(),S(t)},children:t});return(0,m.jsx)("span",{className:v().tagElement,children:n},t)},w=f.map(Y);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{children:(0,m.jsx)(o.Z,{enter:{scale:.8,opacity:0,type:"from",duration:100},onEnd:function(t){(t.type==="appear"||t.type==="enter")&&(t.target.style="display: inline-block")},leave:{width:0,scale:0,opacity:0,duration:200},appear:!1,children:w})}),x&&(0,m.jsx)(y.Z,{ref:l,type:"text",size:"small",style:{width:"30%"},value:s,onBlur:J,onChange:K,onPressEnter:J}),!x&&(0,m.jsxs)(A.Z,{onClick:g,className:v().siteTagPlus,children:[(0,m.jsx)(N.Z,{})," ",_.addition]})]})}},43420:function(k,T,e){"use strict";e.r(T);var h=e(49111),y=e(19650),$=e(34792),A=e(48086),M=e(11849),I=e(3182),d=e(2824),V=e(94043),v=e.n(V),o=e(21010),q=e(75860),N=e(67294),m=e(99882),ee=e(10975),re=e(46298),_=e(78980),H=e(84994),F=e(9006),te=e(258),l=e(54977),ne=e(15873),i=e(22811),s=e(85893);T.default=function(){var U,j=(0,N.useRef)(),R=(0,N.useState)([]),f=(0,d.Z)(R,2),C=f[0],B=f[1],ae=(0,o.tT)("file",function(a){return{setUploadList:a.setUploadList}}),z=ae.setUploadList,x=(0,N.useState)(function(){var a;return((a=j.current)===null||a===void 0?void 0:a.getFieldValue("content"))||null}),W=(0,d.Z)(x,2),g=W[0],K=W[1],S=function(){var a=(0,I.Z)(v().mark(function t(){return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,m.V5)({nid:2}).then(function(r){var P;return r==null||(P=r.data)===null||P===void 0?void 0:P.list.map(function(O){return{value:O.id,label:O.cname}})});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},t)}));return function(){return a.apply(this,arguments)}}(),J=function(t){var n;K(t),(n=j.current)===null||n===void 0||n.setFieldsValue({content:t})},Y=function(){var a=(0,I.Z)(v().mark(function t(n){var c,r;return v().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,F.gg)((0,M.Z)((0,M.Z)({},n),{},{content:g,id:(c=(r=o.m8.location.query)===null||r===void 0?void 0:r.id)!==null&&c!==void 0?c:"0"})).then(function(D){(D==null?void 0:D.success)&&A.default.success(D.msg),(D==null?void 0:D.success)&&(0,q.pQ)(2e3).then(function(){return o.m8.push({pathname:"/product/list"})})});case 2:case"end":return O.stop()}},t)}));return function(n){return a.apply(this,arguments)}}(),w=function(){var a=(0,I.Z)(v().mark(function t(n){return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n!=null&&n.id)){r.next=6;break}return r.next=3,(0,F.C5)(n).then(function(P){var O,D,Q,se,ue,Z,p,E=(O=P==null||(D=P.data)===null||D===void 0?void 0:D.info)!==null&&O!==void 0?O:{};return B(E==null?void 0:E.special),K((Q=E==null||(se=E.detail)===null||se===void 0?void 0:se.content)!==null&&Q!==void 0?Q:null),z((ue=E==null?void 0:E.album.map(function(oe){var le;return{url:oe,status:"done",uid:Math.floor(Math.random()*100).toString(),name:((le=oe.match(/\/(\w+\.(?:png|jpg|gif|bmp))$/i))===null||le===void 0?void 0:le[1])||""}}))!==null&&ue!==void 0?ue:[]),(0,M.Z)((0,M.Z)({},E),{},{content:(Z=E==null||(p=E.detail)===null||p===void 0?void 0:p.content)!==null&&Z!==void 0?Z:null})});case 3:return r.abrupt("return",r.sent);case 6:return z([]),r.abrupt("return",{});case 8:case"end":return r.stop()}},t)}));return function(n){return a.apply(this,arguments)}}();return(0,s.jsx)(re.ZP,{children:(0,s.jsxs)(i.ZP,{formRef:j,layout:"vertical",wrapperCol:{md:{span:16},lg:{span:16},xl:{span:8}},initialValues:{isCrop:1},submitter:{render:function(t,n){return(0,s.jsx)(y.Z,{size:"middle",children:n},"spaceGroup")},resetButtonProps:{shape:"round",icon:(0,s.jsx)(te.Z,{})},submitButtonProps:{type:"primary",shape:"round",icon:(0,s.jsx)(l.Z,{})}},validateTrigger:["onBlur"],params:{id:(U=o.m8.location.query)===null||U===void 0?void 0:U.id},onFinish:function(t){return Y(t)},request:function(t){return w(t)},children:[(0,s.jsx)(i._I,{hasFeedback:!0,width:"sm",name:"pid",label:"\u5206\u7C7B",request:S,tooltip:"\u5546\u54C1\u53D1\u5E03\u7684\u5206\u7C7B",fieldProps:{allowClear:!1},rules:[{required:!0,message:"\u9009\u62E9\u5546\u54C1\u53D1\u5E03\u7684\u5206\u7C7B"}]}),(0,s.jsx)(i.Hg,{min:0,width:"sm",hasFeedback:!0,label:"\u552E\u4EF7",name:"price",rules:[{required:!0,message:"\u8BF7\u4E3A\u5546\u54C1\u8BBE\u7F6E\u552E\u4EF7"}]}),(0,s.jsx)(i.V,{hasFeedback:!0,width:"sm",label:"\u5E93\u5B58",name:"stock",tooltip:"\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u8BBE\u7F6E\u5E93\u5B58",fieldProps:{allowClear:!1},rules:[{required:!0,message:"\u8BF7\u4E3A\u5546\u54C1\u8BBE\u7F6E\u5E93\u5B58"},{pattern:/^\d+$/,message:"\u5546\u54C1\u5E93\u5B58\u5FC5\u9700\u4E3A\u6B63\u6574\u6570"}]}),(0,s.jsx)(i.V,{hasFeedback:!0,label:"\u5546\u54C1\u540D",name:"title",tooltip:"\u9650\u523632\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u4F5C\u4E3A\u6807\u9898",getValueFromEvent:function(t){return t.target.value.trim()},fieldProps:{maxLength:32,showCount:!0},rules:[{required:!0,message:"\u8BF7\u5B8C\u5584\u5546\u54C1\u540D"},{min:15,message:"\u5546\u54C1\u540D\u4E0D\u5B9C\u592A\u77ED"}]}),(0,s.jsx)(i.V,{hasFeedback:!0,label:"\u5173\u952E\u8BCD",name:"keywords",tooltip:"\u8BF7\u7528\u7A7A\u683C\u5206\u9694",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",fieldProps:{showCount:!0,maxLength:32},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"},{type:"string",min:8,message:"\u518D\u591A\u6765\u4E24\u4E2A\u5173\u952E\u8BCD"},{type:"string",pattern:/^[^\u2018-\u2027\uff01-\uff0f\uff1a-\uff20\u3002]+$/,message:"\u5173\u952E\u8BCD\u53EA\u80FD\u4F7F\u7528\u82F1\u6587\u9017\u53F7\u6216\u7A7A\u683C\u5206\u9694"}]}),(0,s.jsx)(i.$J,{hasFeedback:!0,label:"\u5546\u54C1\u7B80\u8FF0",name:"description",tooltip:"SEO\u4F18\u5316\u5F88\u91CD\u8981",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u7B80\u8FF0",getValueFromEvent:function(t){return t.target.value.trim()},fieldProps:{maxLength:256,showCount:!0,allowClear:!0,autoSize:{minRows:5,maxRows:8}},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u7B80\u8FF0"},{type:"string",min:50,message:"\u518D\u591A\u51E0\u53E5\u5546\u54C1\u7B80\u8FF0\u5427"}]}),(0,s.jsx)(i.ZP.Item,{hasFeedback:!0,label:"\u5546\u54C1\u5356\u70B9",name:"special",tooltip:"\u63D0\u70BC\u5546\u54C1\u5356\u70B9",rules:[{required:!0,message:"\u8BF7\u81F3\u5C11\u586B\u5199\u4E00\u4E2A\u5546\u54C1\u5356\u70B9"},function(){return{validator:function(t,n){return 3>=n.length?Promise.resolve():Promise.reject(new Error("\u5546\u54C1\u5356\u70B9\u53EA\u9700\u89813\u4E2A\u5C31\u884C\u4E86"))}}}],children:(0,s.jsx)(H.Q,{color:"red",tagsList:C,addition:"\u5546\u54C1\u5356\u70B9",tagIcon:(0,s.jsx)(ne.Z,{}),handleChange:function(t){var n;return(n=j.current)===null||n===void 0?void 0:n.setFieldValue("special",t)}})}),(0,s.jsx)(i.ZP.Item,{name:"album",label:"\u5546\u54C1\u76F8\u518C",tooltip:"\u9650\u5236\u4E3A5\u5F20\u56FE\u7247",rules:[{required:!0,message:"\u8BF7\u5B8C\u5584\u5546\u54C1\u76F8\u518C"},{type:"array",max:5,message:"\u5546\u54C1\u76F8\u518C\u53EA\u9700\u89815\u5F20\u56FE\u7247\u5C31\u884C\u4E86"}],children:(0,s.jsx)(_.p,{limit:5,setFieldValue:function(t){var n;return(n=j.current)===null||n===void 0?void 0:n.setFieldValue("album",t)}})}),(0,s.jsx)(i.ZP.Item,{name:"content",label:"\u5546\u54C1\u8BE6\u60C5",tooltip:"\u5546\u54C1\u8BE6\u60C5",wrapperCol:{xs:{span:24},sm:{span:24},xl:{span:16}},rules:[{required:!0,message:"\u5546\u54C1\u8BE6\u60C5\u4E0D\u5F97\u4E3A\u7A7A"}],children:(0,s.jsx)(ee.Z,{content:g,setContent:J,uploadPath:"product/content"})})]})})}},9006:function(k,T,e){"use strict";e.d(T,{C5:function(){return y},gg:function(){return $},Od:function(){return A},rQ:function(){return M}});var h=e(36571),y=function(d){return(0,h.Yu)("/product",d)},$=function(d){return(0,h.qC)("/product/save",d)},A=function(d){return(0,h.qC)("/product/del",d)},M=function(d){return(0,h.Yu)("/product/list",d)}}}]);
