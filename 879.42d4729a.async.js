(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[879],{97639:function(ee){ee.exports={siteTagPlus:"siteTagPlus___1olkg",tagElement:"tagElement___Cmkrh"}},10975:function(ee,N,e){"use strict";e.d(N,{Z:function(){return m}});var le=e(49111),$=e(19650),te=e(3182),W=e(34792),I=e(48086),z=e(402),D=e(95574),V=e(69610),x=e(54941),y=e(81306),H=e(19809),Y=e(94043),o=e.n(Y),G=e(67294),ne=e(21010),a=e(3813),j=e.n(a),K=e(5234),Q=e.n(K),n=e(8212),J=e(7085),u=e(85893),m=function(R){(0,y.Z)(c,R);var X=(0,H.Z)(c);function c(_){var r,f;return(0,V.Z)(this,c),f=X.call(this,_),f.state={saving:!1,defaultType:"secondary",defaultStatus:"waiting for input...",uploadPath:(r=_==null?void 0:_.uploadPath)!==null&&r!==void 0?r:"article/content",content:(_==null?void 0:_.content)||"<p>\u6765\u5427\uFF0C\u8BF7\u5F00\u59CB\u4F60\u7684\u8868\u6F14...</p>"},f}return(0,x.Z)(c,[{key:"render",value:function(){var r=this,f=D.Z.Text,w=function(d){console.log("\u81EA\u52A8\u4FDD\u5B58\uFF1A",d),I.default.success("\u81EA\u52A8\u4FDD\u5B58\u6210\u529F")},S={autosave:{waitingTime:6e4,save:function(d){return w(d.getData())}}},O=function(d){var h=d.plugins.get("WordCount"),T=document.getElementById("word-count");T==null||T.appendChild(h.wordCountContainer);var b=d.plugins.get("PendingActions");b.on("change:hasAny",function(U,l,s){s?r.setState({saving:!0,defaultType:"danger",defaultStatus:"inputing..."}):r.setState({saving:!1,defaultType:"success",defaultStatus:"Auto save succeeded!"})}),d.plugins.get("FileRepository").createUploadAdapter=function(U){var l=r.state;return{upload:function(){return(0,te.Z)(o().mark(function C(){var i,L;return o().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,U.file;case 2:return i=A.sent,L=new FormData,L.append("file",i),L.append("path",l.uploadPath),A.abrupt("return",new Promise(function(){var ae=(0,te.Z)(o().mark(function k(q,se){return o().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,ne.WY)("/attach/upload",{method:"post",data:L}).then(function(E){if(E!=null&&E.success){var F;I.default.success(E==null?void 0:E.msg),q({default:E==null||(F=E.data)===null||F===void 0?void 0:F.url})}else se()});case 2:case"end":return Z.stop()}},k)}));return function(k,q){return ae.apply(this,arguments)}}()));case 7:case"end":return A.stop()}},C)}))()}}}};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.CKEditor,{config:S,editor:Q(),data:this.state.content,onReady:function(d){return O(d)},onChange:function(d,h){r.setState({content:h.getData()},function(){return r.props.setContent(h.getData())})}}),(0,u.jsxs)("div",{className:"edit-footer-info",children:[(0,u.jsx)("div",{id:"word-count"}),(0,u.jsxs)($.Z,{children:[(0,u.jsxs)(f,{strong:!0,children:[(0,u.jsx)(n.Z,{})," Editor status:"]}),(0,u.jsxs)(f,{type:this.state.defaultType,children:[this.state.saving&&(0,u.jsx)(J.Z,{})," ",this.state.defaultStatus]})]})]})]})}}]),c}(G.Component)},78980:function(ee,N,e){"use strict";e.d(N,{p:function(){return J}});var le=e(57663),$=e(71577),te=e(49111),W=e(19650),I=e(2824),z=e(402),D=e(95574),V=e(96486),x=e.n(V),y=e(21010),H=e(40245),Y=e(61193),o=e.n(Y),G=e(21940),ne=e(22811),a=e(67294),j=e(95357),K=e(54549),Q=e(85008),n=e(85893),J=function(m){var R,X=D.Z.Text,c=(R=m==null?void 0:m.limit)!==null&&R!==void 0?R:1,_=(0,a.useRef)(),r=(0,a.useState)(0),f=(0,I.Z)(r,2),w=f[0],S=f[1],O=(0,a.useRef)(null),g=(0,a.useState)(!1),d=(0,I.Z)(g,2),h=d[0],T=d[1],b=(0,a.useState)({left:0,top:0,bottom:0,right:0}),U=(0,I.Z)(b,2),l=U[0],s=U[1],C=(0,y.tT)("file",function(t){return{uploadList:t.uploadList,setUploadList:t.setUploadList}}),i=C.uploadList,L=C.setUploadList,P=(0,y.tT)("attach",function(t){return{open:t.open,span:t.span,setOpen:t.setOpen,isModal:t.isModal,setLimit:t.setLimit,setCateId:t.setCateId,setIsModal:t.setIsModal,setMultiple:t.setMultiple,setPagination:t.setPagination,setExpandedKeys:t.setExpandedKeys}}),A=P.open,ae=P.setOpen,k=P.setLimit,q=P.setCateId,se=P.setIsModal,_e=P.setMultiple,Z=P.span,E=P.setPagination,F=P.setExpandedKeys;(0,a.useEffect)(function(){k(c),_e(1<c)},[c,k,_e]),(0,a.useEffect)(function(){m.setFieldValue(i==null?void 0:i.map(function(t){return t.url}))},[i]);var ie=function(M,v){var B,p=(B=O.current)===null||B===void 0?void 0:B.getBoundingClientRect(),oe=window.document.documentElement,ce=oe.clientWidth,ve=oe.clientHeight;!p||s({top:-p.top+v.y,left:-p.left+v.x,right:ce-(p.right-v.x),bottom:ve-(p.bottom-v.y)})},de=function(M){L(function(v){var B=x().cloneDeep(v);return B.splice(M,1).filter(function(p){return p}),B})},ue=function(M){var v;S(M),(v=_.current)===null||v===void 0||v.imagePreview(!0)},re=function(){q([0]),ae(!0),F([]),E({current:1,pageSize:24})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(W.Z,{size:"large",className:"ant-image-container",children:[i?i==null?void 0:i.map(function(t,M){return(0,n.jsxs)("div",{className:"ant-image",children:[(0,n.jsx)("img",{src:t.url,alt:t.name,className:"ant-image-img"}),(0,n.jsx)("div",{className:"ant-image-mask",children:(0,n.jsx)(W.Z,{className:"ant-image-mask-info",children:(0,n.jsx)(X,{className:"anticon",onClick:function(){return ue(M)},children:(0,n.jsxs)("p",{children:[(0,n.jsx)(j.Z,{}),"\u9884\u89C8"]})})})}),(0,n.jsx)($.Z,{shape:"circle",icon:(0,n.jsx)(K.Z,{style:{fontSize:".8rem"}}),onClick:function(){return de(M)}})]},t.uid)}):null,c>i.length&&(0,n.jsx)("div",{className:"ant-image-select",children:(0,n.jsx)(Q.Z,{id:"select",onClick:function(){return re()}})})]}),(0,n.jsx)(G.e,{ref:_,curIdx:w,imgList:i}),(0,n.jsx)(ne.Yr,{width:960,open:A,submitter:!1,onOpenChange:function(M){return se(M)},modalProps:{centered:!0,maskClosable:!1,destroyOnClose:!0,afterClose:function(){q([0]),F([]),E({current:1,pageSize:Z.pageSize})},onCancel:function(){return ae(!1)},modalRender:function(M){return(0,n.jsx)(o(),{bounds:l,disabled:h,onStart:function(B,p){return ie(B,p)},children:(0,n.jsx)("div",{ref:O,children:M})})}},title:(0,n.jsx)("div",{style:{width:"100%",cursor:"move"},onMouseOut:function(){T(!0)},onMouseOver:function(){h&&T(!1)},children:"\u6587\u4EF6\u7BA1\u7406"}),children:(0,n.jsx)(H.b,{previewSpan:18,directorySpan:6})})]})}},84994:function(ee,N,e){"use strict";e.d(N,{Q:function(){return G}});var le=e(47673),$=e(4107),te=e(71153),W=e(60331),I=e(86582),z=e(2824),D=e(67294),V=e(97639),x=e.n(V),y=e(65858),H=e(89366),Y=e(49101),o=e(85893),G=function(a){var j,K,Q=(j=a==null?void 0:a.color)!==null&&j!==void 0?j:"processing",n=(0,D.useRef)(null),J=(0,D.useState)(""),u=(0,z.Z)(J,2),m=u[0],R=u[1],X=(0,D.useState)(function(){var l;return(l=a==null?void 0:a.tagsList)!==null&&l!==void 0?l:[]}),c=(0,z.Z)(X,2),_=c[0],r=c[1],f=(K=a==null?void 0:a.tagIcon)!==null&&K!==void 0?K:(0,o.jsx)(H.Z,{}),w=(0,D.useState)(!1),S=(0,z.Z)(w,2),O=S[0],g=S[1];(0,D.useEffect)(function(){var l;O&&((l=n.current)===null||l===void 0||l.focus())},[O]);var d=function(){return g(!0)},h=function(s){return R(s.target.value)},T=function(s){var C=_.filter(function(i){return i!==s});a.handleChange(C),r(C)},b=function(){if(m&&_.indexOf(m)===-1){var s=[].concat((0,I.Z)(_),[m]);a.handleChange(s),r(s)}R(""),g(!1)},U=function(s){if(s){var C=(0,o.jsx)(W.Z,{closable:!0,color:Q,icon:f,onClose:function(L){L.preventDefault(),T(s)},children:s});return(0,o.jsx)("span",{className:x().tagElement,children:C},s)}else return};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{children:(0,o.jsx)(y.Z,{enter:{scale:.8,opacity:0,type:"from",duration:100},onEnd:function(s){(s.type==="appear"||s.type==="enter")&&(s.target.style="display: inline-block")},leave:{width:0,scale:0,opacity:0,duration:200},appear:!1,children:_==null?void 0:_.map(U)})}),O&&(0,o.jsx)($.Z,{ref:n,type:"text",size:"small",style:{width:"30%"},value:m,onBlur:b,onChange:h,onPressEnter:b}),!O&&(0,o.jsxs)(W.Z,{onClick:d,className:x().siteTagPlus,children:[(0,o.jsx)(Y.Z,{})," ",a.addition]})]})}}}]);
