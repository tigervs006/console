(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8193],{10975:function(ie,j,e){"use strict";e.d(j,{Z:function(){return P}});var oe=e(49111),b=e(19650),F=e(3182),Z=e(34792),M=e(48086),le=e(402),N=e(95574),$=e(69610),z=e(54941),K=e(81306),H=e(19809),Y=e(94043),f=e.n(Y),G=e(67294),V=e(21010),_=e(72757),ae=e.n(_),J=e(5234),Q=e.n(J),n=e(8212),X=e(7085),l=e(85893),P=function(I){(0,K.Z)(u,I);var w=(0,H.Z)(u);function u(r){var d,m;return(0,$.Z)(this,u),m=w.call(this,r),m.state={saving:!1,defaultType:"secondary",defaultStatus:"waiting for input...",uploadPath:(d=r==null?void 0:r.uploadPath)!==null&&d!==void 0?d:"article/content",content:(r==null?void 0:r.content)||"<p>\u6765\u5427\uFF0C\u8BF7\u5F00\u59CB\u4F60\u7684\u8868\u6F14...</p>"},m}return(0,z.Z)(u,[{key:"render",value:function(){var d=this,m=N.Z.Text,k=function(a){console.log("\u81EA\u52A8\u4FDD\u5B58\uFF1A",a),M.default.success("\u81EA\u52A8\u4FDD\u5B58\u6210\u529F")},q={autosave:{waitingTime:6e4,save:function(a){return k(a.getData())}}},S=function(a){var h=a.plugins.get("WordCount"),D=document.getElementById("word-count");D==null||D.appendChild(h.wordCountContainer);var ee=a.plugins.get("PendingActions");ee.on("change:hasAny",function(L,U,W){W?d.setState({saving:!0,defaultType:"danger",defaultStatus:"inputing..."}):d.setState({saving:!1,defaultType:"success",defaultStatus:"Auto save succeeded!"})}),a.plugins.get("FileRepository").createUploadAdapter=function(L){var U=d.state;return{upload:function(){return(0,F.Z)(f().mark(function B(){var s,x;return f().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,L.file;case 2:return s=E.sent,x=new FormData,x.append("file",s),x.append("path",U.uploadPath),E.abrupt("return",new Promise(function(){var y=(0,F.Z)(f().mark(function T(A,te){return f().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,V.WY)("/attach/upload",{method:"post",data:x}).then(function(o){if(o!=null&&o.success){var R;M.default.success(o==null?void 0:o.msg),A({default:o==null||(R=o.data)===null||R===void 0?void 0:R.url})}else te()});case 2:case"end":return C.stop()}},T)}));return function(T,A){return y.apply(this,arguments)}}()));case 7:case"end":return E.stop()}},B)}))()}}}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.CKEditor,{"data-inspector-line":"97","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\components\\Ckeditor\\index.tsx",config:q,editor:Q(),data:this.state.content,onReady:function(a){return S(a)},onChange:function(a,h){d.setState({content:h.getData()},function(){return d.props.setContent(h.getData())})}}),(0,l.jsxs)("div",{"data-inspector-line":"107","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\components\\Ckeditor\\index.tsx",className:"edit-footer-info",children:[(0,l.jsx)("div",{"data-inspector-line":"108","data-inspector-column":"20","data-inspector-relative-path":"src\\pages\\components\\Ckeditor\\index.tsx",id:"word-count"}),(0,l.jsxs)(b.Z,{"data-inspector-line":"109","data-inspector-column":"20","data-inspector-relative-path":"src\\pages\\components\\Ckeditor\\index.tsx",children:[(0,l.jsxs)(m,{"data-inspector-line":"110","data-inspector-column":"24","data-inspector-relative-path":"src\\pages\\components\\Ckeditor\\index.tsx",strong:!0,children:[(0,l.jsx)(n.Z,{"data-inspector-line":"111","data-inspector-column":"28","data-inspector-relative-path":"src\\pages\\components\\Ckeditor\\index.tsx"})," Editor status:"]}),(0,l.jsxs)(m,{"data-inspector-line":"113","data-inspector-column":"24","data-inspector-relative-path":"src\\pages\\components\\Ckeditor\\index.tsx",type:this.state.defaultType,children:[this.state.saving&&(0,l.jsx)(X.Z,{"data-inspector-line":"114","data-inspector-column":"50","data-inspector-relative-path":"src\\pages\\components\\Ckeditor\\index.tsx"})," ",this.state.defaultStatus]})]})]})]})}}]),u}(G.Component)},78980:function(ie,j,e){"use strict";e.d(j,{p:function(){return X}});var oe=e(57663),b=e(71577),F=e(49111),Z=e(19650),M=e(2824),le=e(402),N=e(95574),$=e(96486),z=e.n($),K=e(21010),H=e(40245),Y=e(61193),f=e.n(Y),G=e(21940),V=e(22811),_=e(67294),ae=e(95357),J=e(54549),Q=e(85008),n=e(85893),X=function(P){var I,w=N.Z.Text,u=(I=P==null?void 0:P.limit)!==null&&I!==void 0?I:1,r=(0,_.useRef)(),d=(0,_.useState)(0),m=(0,M.Z)(d,2),k=m[0],q=m[1],S=(0,_.useRef)(null),O=(0,_.useState)(!1),a=(0,M.Z)(O,2),h=a[0],D=a[1],ee=(0,_.useState)({left:0,top:0,bottom:0,right:0}),L=(0,M.Z)(ee,2),U=L[0],W=L[1],B=(0,K.tT)("file",function(t){return{uploadList:t.uploadList,setUploadList:t.setUploadList}}),s=B.uploadList,x=B.setUploadList,p=(0,K.tT)("attach",function(t){return{open:t.open,span:t.span,setOpen:t.setOpen,isModal:t.isModal,setLimit:t.setLimit,setCateId:t.setCateId,setIsModal:t.setIsModal,setMultiple:t.setMultiple,setPagination:t.setPagination,setExpandedKeys:t.setExpandedKeys}}),E=p.open,y=p.setOpen,T=p.setLimit,A=p.setCateId,te=p.setIsModal,ne=p.setMultiple,C=p.span,o=p.setPagination,R=p.setExpandedKeys;(0,_.useEffect)(function(){T(u),ne(1<u)},[u,T,ne]),(0,_.useEffect)(function(){P.setFieldValue(s==null?void 0:s.map(function(t){return t.url}))},[s]);var re=function(c,i){var g,v=(g=S.current)===null||g===void 0?void 0:g.getBoundingClientRect(),se=window.document.documentElement,ue=se.clientWidth,pe=se.clientHeight;!v||W({top:-v.top+i.y,left:-v.left+i.x,right:ue-(v.right-i.x),bottom:pe-(v.bottom-i.y)})},de=function(c){x(function(i){var g=z().cloneDeep(i);return g.splice(c,1).filter(function(v){return v}),g})},ce=function(c){var i;q(c),(i=r.current)===null||i===void 0||i.imagePreview(!0)},_e=function(){A([0]),y(!0),R([]),o({current:1,pageSize:24})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.Z,{"data-inspector-line":"120","data-inspector-column":"12","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",size:"large",className:"ant-image-container",children:[s?s==null?void 0:s.map(function(t,c){return(0,n.jsxs)("div",{"data-inspector-line":"123","data-inspector-column":"26","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",className:"ant-image",children:[(0,n.jsx)("img",{"data-inspector-line":"124","data-inspector-column":"30","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",src:t.url,alt:t.name,className:"ant-image-img"}),(0,n.jsx)("div",{"data-inspector-line":"125","data-inspector-column":"30","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",className:"ant-image-mask",children:(0,n.jsx)(Z.Z,{"data-inspector-line":"126","data-inspector-column":"34","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",className:"ant-image-mask-info",children:(0,n.jsx)(w,{"data-inspector-line":"127","data-inspector-column":"38","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",className:"anticon",onClick:function(){return ce(c)},children:(0,n.jsxs)("p",{"data-inspector-line":"128","data-inspector-column":"42","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",children:[(0,n.jsx)(ae.Z,{"data-inspector-line":"129","data-inspector-column":"46","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx"}),"\u9884\u89C8"]})})})}),(0,n.jsx)(b.Z,{"data-inspector-line":"135","data-inspector-column":"30","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",shape:"circle",icon:(0,n.jsx)(J.Z,{"data-inspector-line":"135","data-inspector-column":"59","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",style:{fontSize:".8rem"}}),onClick:function(){return de(c)}})]},t.uid)}):null,u>s.length&&(0,n.jsx)("div",{"data-inspector-line":"140","data-inspector-column":"20","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",className:"ant-image-select",children:(0,n.jsx)(Q.Z,{"data-inspector-line":"141","data-inspector-column":"24","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",id:"select",onClick:function(){return _e()}})})]}),(0,n.jsx)(G.e,{"data-inspector-line":"145","data-inspector-column":"12","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",ref:r,curIdx:k,imgList:s}),(0,n.jsx)(V.Yr,{"data-inspector-line":"146","data-inspector-column":"12","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",width:960,open:E,submitter:!1,onOpenChange:function(c){return te(c)},modalProps:{centered:!0,maskClosable:!1,destroyOnClose:!0,afterClose:function(){A([0]),R([]),o({current:1,pageSize:C.pageSize})},onCancel:function(){return y(!1)},modalRender:function(c){return(0,n.jsx)(f(),{"data-inspector-line":"162","data-inspector-column":"24","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",bounds:U,disabled:h,onStart:function(g,v){return re(g,v)},children:(0,n.jsx)("div",{"data-inspector-line":"163","data-inspector-column":"28","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",ref:S,children:c})})}},title:(0,n.jsx)("div",{"data-inspector-line":"168","data-inspector-column":"20","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",style:{width:"100%",cursor:"move"},onMouseOut:function(){D(!0)},onMouseOver:function(){h&&D(!1)},children:"\u6587\u4EF6\u7BA1\u7406"}),children:(0,n.jsx)(H.b,{"data-inspector-line":"184","data-inspector-column":"16","data-inspector-relative-path":"src\\pages\\components\\FileSelect\\index.tsx",previewSpan:18,directorySpan:6})})]})}}}]);
