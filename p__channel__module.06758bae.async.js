(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[326],{45154:function(q,g,e){"use strict";e.r(g);var m=e(66456),f=e(80818),w=e(49111),R=e(19650),x=e(57663),h=e(71577),D=e(11849),S=e(34792),c=e(48086),_=e(3182),j=e(2824),ee=e(71194),N=e(97022),ne=e(94043),r=e.n(ne),E=e(67294),M=e(21010),L=e(46298),y=e(14854),U=e(7446),I=e(75860),p=e(99882),Y=e(1870),Q=e(8212),H=e(73171),$=e(49101),u=e(85893);g.default=function(){var Z=N.Z.confirm,G=(0,M.md)(),J={status:1,name:"\u6A21\u578B\u540D\u79F0",id:(0,I.O1)(4)},A=(0,E.useRef)(),b=(0,M.tT)("resize",function(o){return{resize:o.resize}}),P=b.resize,z=(0,E.useState)(),W=(0,j.Z)(z,2),F=W[0],T=W[1],B=(0,E.useState)([]),te=(0,j.Z)(B,2),V=te[0],re=te[1],K=(0,E.useRef)(),le=function(){var o=(0,_.Z)(r().mark(function l(n){return r().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,p.mJ)(n).then(function(t){(t==null?void 0:t.success)&&c.default.success(t.msg),(t==null?void 0:t.success)&&(0,I.pQ)(2e3).then(function(){var a;return(a=K.current)===null||a===void 0?void 0:a.reload()})});case 2:case"end":return s.stop()}},l)}));return function(n){return o.apply(this,arguments)}}(),ae=function(l,n){l.stopPropagation();var d=[],s=[];n instanceof Array&&n.forEach(function(t){var a;d.push(t.id),s.push((a=t==null?void 0:t.name)!==null&&a!==void 0?a:"")}),Z({centered:!0,cancelText:"\u7B97\u4E86",title:"\u5F53\u771F\u8981\u5220\u9664?",icon:(0,u.jsx)(Y.Z,{}),cancelButtonProps:{shape:"round"},okButtonProps:{danger:!0,shape:"round"},content:n instanceof Array?"".concat(s.slice(0,3).join("\uFF0C")," \u7B49 ").concat(s.length," \u4E2A\u6A21\u578B"):"".concat(n.name," \u8FD9\u4E2A\u6A21\u578B"),onOk:function(){return(0,_.Z)(r().mark(function a(){return r().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,p.R$)({id:d}).then(function(i){var O;(i==null?void 0:i.success)&&c.default.success(i.msg),n instanceof Array&&((O=K.current)===null||O===void 0||O.clearSelected()),(i==null?void 0:i.success)&&(0,I.pQ)(2e3).then(function(){var C;return(C=K.current)===null||C===void 0?void 0:C.reload()})});case 2:case"end":return v.stop()}},a)}))()},onCancel:function(){var a;n instanceof Array&&((a=K.current)===null||a===void 0||a.clearSelected())}})},se=function(){var o=(0,_.Z)(r().mark(function l(n,d,s){var t,a;return r().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:t=(0,D.Z)((0,D.Z)((0,D.Z)({},n),d),s);for(a in t)(t[a]===""||t[a]===null||t[a]===void 0)&&delete t[a];return v.next=4,(0,p.m4)(t).then(function(i){var O,C,X,k,oe=i==null||(O=i.data)===null||O===void 0?void 0:O.list;return{data:oe||[],total:(C=i==null||(X=i.data)===null||X===void 0?void 0:X.total)!==null&&C!==void 0?C:0,success:(k=i==null?void 0:i.success)!==null&&k!==void 0?k:!0}});case 4:return v.abrupt("return",v.sent);case 5:case"end":return v.stop()}},l)}));return function(n,d,s){return o.apply(this,arguments)}}(),_e=[{title:"ID",sorter:!0,search:!1,readonly:!0,dataIndex:"id"},{search:!1,title:"\u6A21\u578B\u540D\u79F0",dataIndex:"name",formItemProps:function(){return{rules:[{required:!0,message:"\u6A21\u578B\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"},{max:30,message:"\u6A21\u578B\u540D\u79F0\u8BF7\u63A7\u5236\u572830\u4E2A\u5B57\u7B26\u4EE5\u5185"}]}},fieldProps:{onBlur:function(l){var n,d,s=(n=A.current)===null||n===void 0?void 0:n.getRowData(V.toString()),t=(0,I.Qh)(l.target.value).replace(/\s+/g,"");typeof s.id=="string"&&((d=A.current)===null||d===void 0||d.setRowData(V.toString(),{nid:t,ctl_name:t.toLowerCase().replace(/( |^)[a-z]/g,function(a){return a.toUpperCase()})}))}}},{title:"\u6A21\u578B\u540D\u79F0",dataIndex:"name",hideInTable:!0},{search:!1,title:"\u6A21\u578B\u6807\u8BC6",dataIndex:"nid",formItemProps:function(){return{rules:[{required:!0,message:"\u6A21\u578B\u6807\u8BC6\u4E3A\u5FC5\u586B\u9879"},{max:30,message:"\u6A21\u578B\u6807\u8BC6\u8BF7\u63A7\u5236\u572830\u4E2A\u5B57\u7B26\u4EE5\u5185"},{type:"string",pattern:/^\w+$/,message:"\u6A21\u578B\u6807\u8BC6\u53EA\u80FD\u662F\u82F1\u6587\u3001\u6570\u5B57\u548C\u4E0B\u5212\u7EBF\u7684\u7EC4\u5408"}]}}},{title:"\u6A21\u578B\u6807\u8BC6",dataIndex:"nid",hideInTable:!0},{search:!1,title:"\u63A7\u5236\u5668\u540D",dataIndex:"ctl_name",formItemProps:function(){return{rules:[{required:!0,message:"\u63A7\u5236\u5668\u540D\u4E3A\u5FC5\u586B\u9879"},{max:30,message:"\u63A7\u5236\u5668\u540D\u8BF7\u63A7\u5236\u572830\u4E2A\u5B57\u7B26\u4EE5\u5185"},{type:"string",pattern:/^[A-Z]\w+$/,message:"\u63A7\u5236\u540D\u9996\u5B57\u6BCD\u987B\u4E3A\u5927\u5199"}]}}},{sorter:!0,search:!1,editable:!1,title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_time"},{title:"\u65E5\u671F\u8303\u56F4",hideInTable:!0,dataIndex:"dateRange",valueType:"dateRange",fieldProps:{showNow:!0,showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}},{search:!1,filters:!0,onFilter:!0,title:"\u6A21\u578B\u72B6\u6001",filterMode:"tree",dataIndex:"status",valueType:"select",valueEnum:{1:{text:"\u663E\u793A",status:"Show"},0:{text:"\u9690\u85CF",status:"Hide"}},fieldProps:{allowClear:!1,options:[{label:"\u9690\u85CF",value:0},{label:"\u663E\u793A",value:1}]},render:function(l,n){return(0,u.jsx)(U.S,{record:n,url:"/module/status"})}},{title:"\u64CD\u4F5C",valueType:"option",render:function(l,n,d,s){return[(0,u.jsxs)(R.Z,{size:4,children:[(0,u.jsx)(h.Z,{size:"small",shape:"round",icon:(0,u.jsx)(Q.Z,{}),onClick:function(){var a;return s==null||(a=s.startEditable)===null||a===void 0?void 0:a.call(s,n.id)},children:"\u7F16\u8F91"}),(0,u.jsx)(h.Z,{danger:!0,size:"small",shape:"round",type:"primary",icon:(0,u.jsx)(H.Z,{}),onClick:function(a){return ae(a,n)},children:"\u5220\u9664"})]},"operation")]}}];return(0,u.jsx)(L.ZP,{children:(0,u.jsx)(y.nx,{rowKey:"id",actionRef:K,columns:_e,request:se,search:{filterType:"light"},editableFormRef:A,recordCreatorProps:!1,scroll:P.tableScroll,onChange:function(l){return T(l.pageSize)},editable:{editableKeys:V,type:"multiple",onChange:re,onSave:function(l,n){return le(n)},actionRender:function(l,n,d){return[d.save,d.cancel]}},rowSelection:{checkStrictly:!1,selections:[f.Z.SELECTION_ALL,f.Z.SELECTION_INVERT,f.Z.SELECTION_NONE]},pagination:{pageSize:F!=null?F:P.pageSize,hideOnSinglePage:!0},headerTitle:(0,u.jsx)(M.Nv,{accessible:G.btnFilter("module_create_btn"),children:(0,u.jsx)(h.Z,{shape:"round",type:"primary",icon:(0,u.jsx)($.Z,{}),onClick:function(){var l,n;return(l=K.current)===null||l===void 0||(n=l.addEditRecord)===null||n===void 0?void 0:n.call(l,J)},children:"\u65B0\u5EFA\u6A21\u578B"},"createModule")},"module_create_btn"),tableAlertRender:function(l){var n=l.selectedRowKeys,d=l.onCleanSelected;return(0,u.jsxs)("span",{children:["\u5DF2\u9009 ",n.length," \u4E2A\u6A21\u578B",(0,u.jsx)("a",{style:{marginLeft:8},onClick:d,children:"\u53D6\u6D88\u9009\u62E9"})]})},tableAlertOptionRender:function(l){var n=l.selectedRows;return(0,u.jsx)(R.Z,{size:16,children:(0,u.jsx)("a",{onClick:function(s){return ae(s,n)},children:"\u6279\u91CF\u5220\u9664"})})}})})}},99882:function(q,g,e){"use strict";e.d(g,{wk:function(){return f},rQ:function(){return w},V5:function(){return R},Od:function(){return x},mJ:function(){return h},m4:function(){return D},R$:function(){return S}});var m=e(36571),f=function(_){return(0,m.qC)("/channel/save",_)},w=function(_){return(0,m.Yu)("/channel/list",_)},R=function(_){return(0,m.Yu)("/channel/cate",_)},x=function(_){return(0,m.qC)("/channel/del",_)},h=function(_){return(0,m.qC)("/module/save",_)},D=function(_){return(0,m.Yu)("/module/list",_)},S=function(_){return(0,m.qC)("/module/del",_)}},7446:function(q,g,e){"use strict";e.d(g,{S:function(){return N}});var m=e(77576),f=e(85979),w=e(34792),R=e(48086),x=e(32059),h=e(3182),D=e(2824),S=e(94043),c=e.n(S),_=e(67294),j=e(36571),ee=e(85893),N=function(r){var E,M,L,y,U,I=(E=r==null?void 0:r.fieldKey)!==null&&E!==void 0?E:"status",p=(M=r==null?void 0:r.disabled)!==null&&M!==void 0?M:!1,Y=(L=r==null?void 0:r.echoChecked)!==null&&L!==void 0?L:"\u663E\u793A",Q=(y=r==null?void 0:r.echoUnChecked)!==null&&y!==void 0?y:"\u9690\u85CF",H=(0,_.useState)(!1),$=(0,D.Z)(H,2),u=$[0],Z=$[1],G=(U=r==null?void 0:r.statusField)!==null&&U!==void 0?U:r.record.status,J=function(){var A=(0,h.Z)(c().mark(function b(P,z,W){return c().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return z.stopPropagation(),Z(!0),T.next=4,(0,j.qC)(r.url,(0,x.Z)({id:W.id},I,P?1:0)).then(function(B){Z(!1),(B==null?void 0:B.success)&&R.default.success(B.msg)});case 4:case"end":return T.stop()}},b)}));return function(P,z,W){return A.apply(this,arguments)}}();return(0,ee.jsx)(f.Z,{loading:u,disabled:p,checkedChildren:Y,defaultChecked:!!G,unCheckedChildren:Q,onChange:function(b,P){return J(b,P,r.record)}},r.record.id)}}}]);
