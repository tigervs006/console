(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[548],{99882:function(oe,j,e){"use strict";e.d(j,{wk:function(){return x},rQ:function(){return N},V5:function(){return b},Od:function(){return M},mJ:function(){return X},m4:function(){return R},R$:function(){return D}});var m=e(36571),x=function(c){return(0,m.qC)("/channel/save",c)},N=function(c){return(0,m.Yu)("/channel/list",c)},b=function(c){return(0,m.Yu)("/channel/cate",c)},M=function(c){return(0,m.qC)("/channel/del",c)},X=function(c){return(0,m.qC)("/module/save",c)},R=function(c){return(0,m.Yu)("/module/list",c)},D=function(c){return(0,m.qC)("/module/del",c)}},10975:function(oe,j,e){"use strict";e.d(j,{Z:function(){return O}});var m=e(49111),x=e(19650),N=e(3182),b=e(34792),M=e(48086),X=e(402),R=e(95574),D=e(69610),P=e(54941),c=e(81306),w=e(19809),ie=e(94043),z=e.n(ie),_e=e(67294),ue=e(21010),U=e(72757),de=e.n(U),ce=e(5234),G=e.n(ce),l=e(8212),se=e(7085),g=e(85893),O=function(F){(0,c.Z)(A,F);var k=(0,w.Z)(A);function A(p){var C,W;return(0,D.Z)(this,A),W=k.call(this,p),W.state={saving:!1,defaultType:"secondary",defaultStatus:"waiting for input...",uploadPath:(C=p==null?void 0:p.uploadPath)!==null&&C!==void 0?C:"article/content",content:(p==null?void 0:p.content)||"<p>\u6765\u5427\uFF0C\u8BF7\u5F00\u59CB\u4F60\u7684\u8868\u6F14...</p>"},W}return(0,P.Z)(A,[{key:"render",value:function(){var C=this,W=R.Z.Text,q=function(f){console.log("\u81EA\u52A8\u4FDD\u5B58\uFF1A",f),M.default.success("\u81EA\u52A8\u4FDD\u5B58\u6210\u529F")},Z={autosave:{waitingTime:6e4,save:function(f){return q(f.getData())}}},ee=function(f){var S=f.plugins.get("WordCount"),o=document.getElementById("word-count");o==null||o.appendChild(S.wordCountContainer);var a=f.plugins.get("PendingActions");a.on("change:hasAny",function($,h,te){te?C.setState({saving:!0,defaultType:"danger",defaultStatus:"inputing..."}):C.setState({saving:!1,defaultType:"success",defaultStatus:"Auto save succeeded!"})}),f.plugins.get("FileRepository").createUploadAdapter=function($){var h=C.state;return{upload:function(){return(0,N.Z)(z().mark(function Q(){var v,V;return z().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,$.file;case 2:return v=L.sent,V=new FormData,V.append("file",v),V.append("path",h.uploadPath),L.abrupt("return",new Promise(function(){var ne=(0,N.Z)(z().mark(function H(J,re){return z().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,ue.WY)("/attach/upload",{method:"post",data:V}).then(function(t){if(t!=null&&t.success){var u;M.default.success(t==null?void 0:t.msg),J({default:t==null||(u=t.data)===null||u===void 0?void 0:u.url})}else re()});case 2:case"end":return r.stop()}},H)}));return function(H,J){return ne.apply(this,arguments)}}()));case 7:case"end":return L.stop()}},Q)}))()}}}};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(U.CKEditor,{config:Z,editor:G(),data:this.state.content,onReady:function(f){return ee(f)},onChange:function(f,S){C.setState({content:S.getData()},function(){return C.props.setContent(S.getData())})}}),(0,g.jsxs)("div",{className:"edit-footer-info",children:[(0,g.jsx)("div",{id:"word-count"}),(0,g.jsxs)(x.Z,{children:[(0,g.jsxs)(W,{strong:!0,children:[(0,g.jsx)(l.Z,{})," Editor status:"]}),(0,g.jsxs)(W,{type:this.state.defaultType,children:[this.state.saving&&(0,g.jsx)(se.Z,{})," ",this.state.defaultStatus]})]})]})]})}}]),A}(_e.Component)},78980:function(oe,j,e){"use strict";e.d(j,{p:function(){return se}});var m=e(57663),x=e(71577),N=e(49111),b=e(19650),M=e(2824),X=e(402),R=e(95574),D=e(96486),P=e.n(D),c=e(21010),w=e(40245),ie=e(61193),z=e.n(ie),_e=e(21940),ue=e(22811),U=e(67294),de=e(95357),ce=e(54549),G=e(85008),l=e(85893),se=function(O){var F,k=R.Z.Text,A=(F=O==null?void 0:O.limit)!==null&&F!==void 0?F:1,p=(0,U.useRef)(),C=(0,U.useState)(0),W=(0,M.Z)(C,2),q=W[0],Z=W[1],ee=(0,U.useRef)(null),Y=(0,U.useState)(!1),f=(0,M.Z)(Y,2),S=f[0],o=f[1],a=(0,U.useState)({left:0,top:0,bottom:0,right:0}),$=(0,M.Z)(a,2),h=$[0],te=$[1],Q=(0,c.tT)("file",function(n){return{uploadList:n.uploadList,setUploadList:n.setUploadList}}),v=Q.uploadList,V=Q.setUploadList,I=(0,c.tT)("attach",function(n){return{open:n.open,span:n.span,setOpen:n.setOpen,isModal:n.isModal,setLimit:n.setLimit,setCateId:n.setCateId,setIsModal:n.setIsModal,setMultiple:n.setMultiple,setPagination:n.setPagination,setExpandedKeys:n.setExpandedKeys}}),L=I.open,ne=I.setOpen,H=I.setLimit,J=I.setCateId,re=I.setIsModal,le=I.setMultiple,r=I.span,t=I.setPagination,u=I.setExpandedKeys;(0,U.useEffect)(function(){H(A),le(1<A)},[A,H,le]),(0,U.useEffect)(function(){O.setFieldValue(v==null?void 0:v.map(function(n){return n.url}))},[v]);var d=function(i,E){var T,B=(T=ee.current)===null||T===void 0?void 0:T.getBoundingClientRect(),ae=window.document.documentElement,y=ae.clientWidth,ve=ae.clientHeight;!B||te({top:-B.top+E.y,left:-B.left+E.x,right:y-(B.right-E.x),bottom:ve-(B.bottom-E.y)})},s=function(i){V(function(E){var T=P().cloneDeep(E);return T.splice(i,1).filter(function(B){return B}),T})},_=function(i){var E;Z(i),(E=p.current)===null||E===void 0||E.imagePreview(!0)},K=function(){J([0]),ne(!0),u([]),t({current:1,pageSize:24})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(b.Z,{size:"large",className:"ant-image-container",children:[v?v==null?void 0:v.map(function(n,i){return(0,l.jsxs)("div",{className:"ant-image",children:[(0,l.jsx)("img",{src:n.url,alt:n.name,className:"ant-image-img"}),(0,l.jsx)("div",{className:"ant-image-mask",children:(0,l.jsx)(b.Z,{className:"ant-image-mask-info",children:(0,l.jsx)(k,{className:"anticon",onClick:function(){return _(i)},children:(0,l.jsxs)("p",{children:[(0,l.jsx)(de.Z,{}),"\u9884\u89C8"]})})})}),(0,l.jsx)(x.Z,{shape:"circle",icon:(0,l.jsx)(ce.Z,{style:{fontSize:".8rem"}}),onClick:function(){return s(i)}})]},n.uid)}):null,A>v.length&&(0,l.jsx)("div",{className:"ant-image-select",children:(0,l.jsx)(G.Z,{id:"select",onClick:function(){return K()}})})]}),(0,l.jsx)(_e.e,{ref:p,curIdx:q,imgList:v}),(0,l.jsx)(ue.Yr,{width:960,open:L,submitter:!1,onOpenChange:function(i){return re(i)},modalProps:{centered:!0,maskClosable:!1,destroyOnClose:!0,afterClose:function(){J([0]),u([]),t({current:1,pageSize:r.pageSize})},onCancel:function(){return ne(!1)},modalRender:function(i){return(0,l.jsx)(z(),{bounds:h,disabled:S,onStart:function(T,B){return d(T,B)},children:(0,l.jsx)("div",{ref:ee,children:i})})}},title:(0,l.jsx)("div",{style:{width:"100%",cursor:"move"},onMouseOut:function(){o(!0)},onMouseOver:function(){S&&o(!1)},children:"\u6587\u4EF6\u7BA1\u7406"}),children:(0,l.jsx)(w.b,{previewSpan:18,directorySpan:6})})]})}},84619:function(oe,j,e){"use strict";e.r(j);var m=e(57663),x=e(71577),N=e(47673),b=e(4107),M=e(11849),X=e(34792),R=e(48086),D=e(49111),P=e(19650),c=e(88983),w=e(47933),ie=e(12968),z=e(40610),_e=e(402),ue=e(95574),U=e(71194),de=e(97022),ce=e(74379),G=e(38648),l=e(3182),se=e(2824),g=e(94043),O=e.n(g),F=e(21010),k=e(67294),A=e(99882),p=e(10975),C=e(46298),W=e(78980),q=e(7524),Z=e(75860),ee=e(15873),Y=e(95357),f=e(258),S=e(54977),o=e(22811),a=e(85893);j.default=function(){var $,h=(0,k.useRef)(),te=(0,k.useState)(function(){var r;return(r=h.current)===null||r===void 0?void 0:r.getFieldValue("content")}),Q=(0,se.Z)(te,2),v=Q[0],V=Q[1],I=(0,F.tT)("file",function(r){return{setUploadList:r.setUploadList}}),L=I.setUploadList,ne=function(){var r=(0,l.Z)(O().mark(function t(){return O().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,A.V5)({nid:1}).then(function(s){var _;return(_=s.data)===null||_===void 0?void 0:_.list.map(function(K){return{value:K.id,label:K.cname}})});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},t)}));return function(){return r.apply(this,arguments)}}(),H=function(){var t,u,d;if(!v)return G.default.error({message:"\u6B63\u6587\u5185\u5BB9\u4E3A\u7A7A",description:"\u8BF7\u5148\u5B8C\u5584\u6B63\u6587\u5185\u5BB9\u5E76\u63D2\u5165\u56FE\u50CF"});var s=(0,Z.l3)(v);switch(!0){case s.length==1:G.default.success({message:"\u63D0\u53D6\u56FE\u50CF\u6210\u529F",description:(0,Z.BX)(s.toString())}),(t=h.current)===null||t===void 0||t.setFieldValue("litpic",s.at(0));break;case 1<s.length:!((u=h.current)!==null&&u!==void 0&&u.getFieldValue("litpic"))&&((d=h.current)===null||d===void 0||d.setFieldValue("litpic",s.at(0))),de.Z.confirm({centered:!0,title:"\u8BF7\u9009\u62E9\u60A8\u8981\u4F7F\u7528\u7684\u56FE\u50CF",icon:(0,a.jsx)(ee.Z,{}),okButtonProps:{shape:"round"},cancelButtonProps:{shape:"round"},content:(0,a.jsx)(w.ZP.Group,{defaultValue:s[0],onChange:function(K){var n;return(n=h.current)===null||n===void 0?void 0:n.setFieldValue("litpic",K.target.value)},children:(0,a.jsx)(P.Z,{size:"middle",direction:"vertical",children:s.map(function(_){return(0,a.jsx)(w.ZP,{value:_,children:(0,a.jsx)(z.Z,{src:_,width:200,fallback:"/logo.svg",preview:{mask:(0,a.jsxs)(ue.Z.Text,{style:{color:"white"},children:[(0,a.jsx)(Y.Z,{})," \u9884\u89C8"]})}})},(0,Z.O1)(3))})})})});break;default:G.default.error({message:"\u63D0\u53D6\u56FE\u50CF\u5931\u8D25",description:"\u6B63\u6587\u4E2D\u4E0D\u5305\u542B\u56FE\u50CF"})}},J=function(t){var u;V(t),(u=h.current)===null||u===void 0||u.setFieldsValue({content:t})},re=function(){var r=(0,l.Z)(O().mark(function t(u){var d,s,_;return O().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,q.Vj)(Object.assign(u,{content:v,id:(d=(s=F.m8.location.query)===null||s===void 0?void 0:s.id)!==null&&d!==void 0?d:null,author:(_=u==null?void 0:u.author)!==null&&_!==void 0?_:localStorage.getItem("user")})).then(function(i){(i==null?void 0:i.success)&&R.default.success(i.msg),(i==null?void 0:i.success)&&(0,Z.pQ)(2e3).then(function(){return F.m8.push({pathname:"/content/list"})})});case 2:case"end":return n.stop()}},t)}));return function(u){return r.apply(this,arguments)}}(),le=function(){var r=(0,l.Z)(O().mark(function t(u){return O().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(u!=null&&u.id)){s.next=6;break}return s.next=3,(0,q.L5)((0,M.Z)({},u)).then(function(_){var K,n,i,E,T,B,ae,y=(K=_==null||(n=_.data)===null||n===void 0?void 0:n.info)!==null&&K!==void 0?K:{};return V((i=y==null||(E=y.content)===null||E===void 0?void 0:E.content)!==null&&i!==void 0?i:null),L([{status:"done",url:y.litpic,name:(T=(0,Z.BX)(y.litpic))!==null&&T!==void 0?T:"",uid:Math.floor(Math.random()*100).toString()}]),(0,M.Z)((0,M.Z)({},y),{},{content:(B=y==null||(ae=y.content)===null||ae===void 0?void 0:ae.content)!==null&&B!==void 0?B:null})});case 3:return s.abrupt("return",s.sent);case 6:return L([]),s.abrupt("return",{});case 8:case"end":return s.stop()}},t)}));return function(u){return r.apply(this,arguments)}}();return(0,a.jsx)(C.ZP,{children:(0,a.jsxs)(o.ZP,{formRef:h,layout:"vertical",wrapperCol:{md:{span:16},lg:{span:16},xl:{span:8}},initialValues:{isCrop:1,is_recom:1},submitter:{render:function(t,u){return(0,a.jsx)(P.Z,{size:"middle",children:u},"spaceGroup")},resetButtonProps:{shape:"round",icon:(0,a.jsx)(f.Z,{})},submitButtonProps:{type:"primary",shape:"round",icon:(0,a.jsx)(S.Z,{})}},validateTrigger:["onBlur"],params:{id:($=F.m8.location.query)===null||$===void 0?void 0:$.id},onFinish:function(t){return re(t)},request:function(t){return le(t)},children:[(0,a.jsx)(o._I,{hasFeedback:!0,width:"sm",name:"cid",label:"\u680F\u76EE",request:ne,tooltip:"\u6587\u6863\u53D1\u5E03\u7684\u680F\u76EE",fieldProps:{allowClear:!1},rules:[{required:!0,message:"\u9009\u62E9\u6587\u6863\u53D1\u5E03\u7684\u680F\u76EE"}]}),(0,a.jsx)(o.V,{hasFeedback:!0,label:"\u6807\u9898",name:"title",tooltip:"\u9650\u523632\u4E2A\u5B57\u7B26",placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u6807\u9898",getValueFromEvent:function(t){return t.target.value.trim()},fieldProps:{maxLength:32,showCount:!0},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u6863\u6807\u9898"},{min:15,message:"\u6587\u6863\u6807\u9898\u4E0D\u5B9C\u592A\u77ED"}]}),(0,a.jsx)(o.V,{hasFeedback:!0,label:"\u5173\u952E\u8BCD",name:"keywords",tooltip:"\u8BF7\u7528\u7A7A\u683C\u5206\u9694",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",fieldProps:{showCount:!0,maxLength:64},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD"},{min:10,message:"\u518D\u591A\u6765\u4E24\u4E2A\u5173\u952E\u8BCD"},{type:"string",pattern:/^[^\u2018-\u2027\uff01-\uff0f\uff1a-\uff20\u3002]+$/,message:"\u5173\u952E\u8BCD\u53EA\u80FD\u4F7F\u7528\u82F1\u6587\u9017\u53F7\u6216\u7A7A\u683C\u5206\u9694"}]}),(0,a.jsx)(o.$J,{hasFeedback:!0,label:"\u6587\u6863\u7B80\u8FF0",name:"description",tooltip:"SEO\u4F18\u5316\u5F88\u91CD\u8981",placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u7B80\u8FF0",getValueFromEvent:function(t){return t.target.value.trim()},fieldProps:{allowClear:!0,showCount:!0,maxLength:256,autoSize:{minRows:5,maxRows:8}},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u6863\u7B80\u8FF0"},{min:50,message:"\u518D\u591A\u51E0\u53E5\u6587\u6863\u7B80\u8FF0",type:"string"}]}),(0,a.jsx)(o._I,{options:[{value:"upload",label:"\u4E0A\u4F20\u56FE\u50CF"},{value:"extract",label:"\u63D0\u53D6\u56FE\u50CF"},{value:"input",label:"\u56FE\u50CF\u7F51\u5740"}],width:"xs",label:"\u4E0A\u4F20\u65B9\u5F0F",name:"uploadMode",initialValue:["upload"],tooltip:"\u4E0A\u4F20/\u63D0\u53D6/\u8F93\u5165\u56FE\u50CF\u7F51\u5740",fieldProps:{allowClear:!1,onChange:function(){var t;if(!((t=F.m8.location.query)!==null&&t!==void 0&&t.id)){var u;L([]),(u=h.current)===null||u===void 0||u.setFieldsValue({litpic:[]})}}}}),(0,a.jsx)(o.ie,{name:["uploadMode"],children:function(t){var u=t.uploadMode;switch(u){case"input":return(0,a.jsx)(o.V,{hasFeedback:!0,name:"litpic",label:"\u56FE\u50CF\u7F51\u5740",tooltip:"\u76F4\u63A5\u8F93\u5165\u56FE\u50CF\u7F51\u5740",placeholder:"\u8BF7\u8F93\u5165\u8F93\u5165\u56FE\u7247\u7F51\u5740",getValueFromEvent:function(s){return s.target.value.trim()},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u56FE\u50CF\u7F51\u5740\u6216\u9009\u62E9\u4E0A\u4F20\u56FE\u50CF\u4F5C\u4E3A\u6587\u6863\u5C01\u9762"},{type:"url",message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684url\u5730\u5740"}]});case"extract":return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.ZP.Item,{hasFeedback:!0,name:"litpic",label:"\u63D0\u53D6\u56FE\u50CF",tooltip:"\u4ECE\u6B63\u6587\u63D0\u53D6\u4E00\u5F20\u56FE\u50CF\u4F5C\u4E3A\u5C01\u9762",rules:[{required:!0,message:"\u8BF7\u70B9\u51FB\u6309\u94AE\u4ECE\u6B63\u6587\u4E2D\u63D0\u53D6\u4E00\u5F20\u56FE\u50CF\u4F5C\u4E3A\u6587\u6863\u5C01\u9762"},{type:"url",message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684url\u5730\u5740"}],children:(0,a.jsx)(b.Z,{readOnly:!0,placeholder:"\u4ECE\u6B63\u6587\u63D0\u53D6\u4E00\u5F20\u56FE\u50CF\u4F5C\u4E3A\u5C01\u9762"})}),(0,a.jsx)(o.ZP.Item,{children:(0,a.jsx)(x.Z,{shape:"round",type:"primary",onClick:H,children:"\u63D0\u53D6\u56FE\u50CF"})})]});default:return(0,a.jsx)(o.ZP.Item,{name:"litpic",rules:[{required:!0,message:"\u8BF7\u5B8C\u5584\u6587\u6863\u5C01\u9762"},{type:"array",max:1,message:"\u6587\u6863\u5C01\u9762\u53EA\u9700\u89811\u5F20\u56FE\u7247\u5C31\u884C\u4E86"}],transform:function(s){return s instanceof Array?{litpic:s.at(-1)}:{litpic:s}},children:(0,a.jsx)(W.p,{setFieldValue:function(s){var _;return(_=h.current)===null||_===void 0?void 0:_.setFieldValue("litpic",s)}})})}}}),(0,a.jsx)(o.ZP.Item,{label:"\u6587\u6863\u5C5E\u6027",tooltip:"\u8BBE\u7F6E\u6587\u6863\u5C5E\u6027",children:(0,a.jsxs)(P.Z,{children:[(0,a.jsx)(o.V2,{name:"is_head",children:"\u5934\u6761"}),(0,a.jsx)(o.V2,{name:"is_recom",children:"\u63A8\u8350"}),(0,a.jsx)(o.V2,{name:"is_litpic",children:"\u56FE\u6587"})]})}),(0,a.jsx)(o.ZP.Item,{name:"content",label:"\u6587\u6863\u5185\u5BB9",tooltip:"\u6587\u6863\u5185\u5BB9",wrapperCol:{xs:{span:24},sm:{span:24},xl:{span:16}},rules:[{required:!0,message:"\u6587\u6863\u5185\u5BB9\u4E0D\u5F97\u4E3A\u7A7A"},{min:100,message:"\u9020\u53E5\u5462?\u518D\u591A\u8BF4\u51E0\u53E5\u5427..."}],children:(0,a.jsx)(p.Z,{content:v,setContent:J})})]})})}},7524:function(oe,j,e){"use strict";e.d(j,{Au:function(){return x},Vj:function(){return N},rQ:function(){return b},L5:function(){return M},Od:function(){return X}});var m=e(36571),x=function(){return(0,m.Yu)("/article/author")},N=function(D){return(0,m.qC)("/article/save",D)},b=function(D){return(0,m.Yu)("/article/list",D)},M=function(D){return(0,m.Yu)("/article",D)},X=function(D){return(0,m.qC)("/article/del",D)}}}]);
